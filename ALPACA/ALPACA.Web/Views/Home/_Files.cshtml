<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            @(Html.Kendo().Upload()
                    .Name("files")
                    .Async(a => a
                        .Save("UploadFile", "Home")
                        .AutoUpload(false)
                    )
                    .Events(e => e
                        .Upload("onUpload")
                        .Success("clearUploads")
                    )
            )
        </div>
            <div class="col-md-2">
            @(Html.Kendo().DropDownList()
                    .Name("UploadType")
                    .BindTo(new List<SelectListItem>()
                    {
                        new SelectListItem()
                        {
                            Text="Add",
                            Value="0"
                        },
                        new SelectListItem()
                        {
                            Text="Remove",
                            Value="1"
                        }
                    })
                    .Value("0")
                    )
            </div>
            <div class="col-md-7">
            </div>
            <div class="col-md-3">
                <button id="exportButton" onclick="location.href='@Url.Action("ExportContacts")'" class="btn btn-block btn-primary">Export Contacts</button>
            </div>
    </div>
</div>

<script>
    function onUpload(e)
    {
        e.data = { uploadType: $("#UploadType").val() };
    }
    function clearUploads(e) {
        if (e.id) {
            //reset uploads for only the selected Uploader control
            $("#" + id + " .k-upload-files").remove();
            $("#" + id + " .k-upload-status").remove();
            $("#" + id + " .k-upload.k-header").addClass("k-upload-empty");
            $("#" + id + " .k-upload-button").removeClass("k-state-focused");
        } else {
            //reset all the uploaders
            $(".k-upload-files").remove();
            $(".k-upload-status").remove();
            $(".k-upload.k-header").addClass("k-upload-empty");
            $(".k-upload-button").removeClass("k-state-focused");
        }
        $('#files').find("ul").remove();
        if($('#UploadType').val() == "0")
        {
            toastr.success("Contacts added");
        }
        else
        {
            toastr.success("Contacts removed");
        }
    }
</script>
